<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
  <head th:fragment="htmlhead">
    <meta charset="utf-8"></meta>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"></meta>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
    <meta name="description" content=""></meta>
    <meta name="author" content=""></meta>
    <link rel="shortcut icon" type="image/png" th:href="@{/static/images/favicon.png}"></link>

   	<title th:text="${title}">(title)</title>

  	<link th:href="@{/webjarslocator/bootstrap/dist/css/bootstrap.css}" rel="stylesheet"></link>
  	<link th:href="@{/static/css/starter.css}" rel="stylesheet"></link>
  </head>

  <body>
    <div th:fragment="navbar" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/index">报名系统</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="javascript:">首页</a></li>
            <li><a href="javascript:" data-toggle="modal" data-target="#registerModal">注册</a></li>
            <li><a href="/admin/index">管理</a></li>
            <li><a href="javascript:alert('你猜怎么着！？我没写关于！')">关于</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div th:fragment="navbar-admin" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/index">报名系统</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="javascript:">管理</a></li>
            <li><a href="javascript:" data-toggle="modal" data-target="#addActivityModal">新增活动</a></li>
            <li><a href="javascript:" data-toggle="modal" data-target="#registerModal">注册</a></li>
            <li><a href="javascript:alert('你猜怎么着！？我没写关于！')">关于</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="starter-template">
        <h1>简易报名系统</h1>
        <p class="lead" th:text="${greeting}">(greeting)</p>
      </div>
    </div>

    <div th:fragment="footer" id="footer">
      <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="registerModal">
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h4>只需登记一次</h4>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label for="regDepartment">部门</label>
                <select class="form-control" id="regDepartment">
                  <option selected>技术部</option>
                  <option>金融部</option>
                  <option>市场运营部</option>
                  <option>行政人事部</option>
                  <option>财务部</option>
                  <option>品宣部</option>
                  <option>总经办</option>
                  <option>其他</option>
                </select>
              </div>
              <div class="form-group">
                <label for="regRealName">姓名</label>
                <input type="text" class="form-control" id="regRealName" >
              </div>
              <div class="form-group">
                <label for="regEnglishName">英文名</label>
                <input type="text" class="form-control" id="regEnglishName" >
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
              <button type="button" class="btn btn-primary" data-dismiss="modal" id="addEmployee">注册</button>
            </div>
          </div>
        </div>
      </div>
      <div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="addActivityModal">
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h4>新增活动</h4>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label for="regDepartment">活动名称</label>
                <input type="text" class="form-control" id="activityNameA">
              </div>
              <div class="form-group">
                <label for="regRealName">活动开始时间</label>
                <input type="text" class="form-control" id="startTimeA" th:value="${#dates.format(#dates.createNow(),'yyyy-MM-dd 09:00:00')}">
              </div>
              <div class="form-group">
                <label for="regEnglishName">报名开始时间</label>
                <input type="text" class="form-control" id="applyBeginTimeA" th:value="${#dates.format(#dates.createNow(),'yyyy-MM-dd 09:00:00')}">
              </div>
              <div class="form-group">
                <label for="regEnglishName">报名结束时间</label>
                <input type="text" class="form-control" id="applyEndTimeA" th:value="${#dates.format(#dates.createNow(),'yyyy-MM-dd 18:00:00')}">
              </div>
              <div class="form-group">
                <label for="regEnglishName">活动简介</label>
                <textarea class="form-control" rows="3" id="remarkA"></textarea>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
              <button type="button" class="btn btn-primary" data-dismiss="modal" id="addActivity">新增</button>
            </div>
          </div>
        </div>
      </div>
      <div class="container">
        <p class="muted credit">觉得丑？不要在意这些细节嘛～老铁</p>
      </div>
      <script th:src="@{/webjarslocator/jquery/jquery.min.js}"></script>
      <script th:src="@{/webjarslocator/bootstrap/js/bootstrap.min.js}"></script>
      <script>
        $("#addEmployee").click(function () {
          var regRealName = $("#regRealName").val();
          var regEnglishName = $("#regEnglishName").val();
          if (regRealName == '') {
            alert("请先填写您的真实姓名");
            return;
          }
          if (regEnglishName == '') {
            alert("请先填写您的英文名");
            return;
          }
          var regDepartment =  $("#regDepartment").val();
          $.post("/addEmployee",
                  {
                    department:regDepartment,
                    englishName: regEnglishName,
                    realName: regRealName
                  }, function (data, status) {
                    if (data.c == '100'){
                      alert("登记成功");
                    }else{
                      alert(data.m);
                    }
                  });
        });
        $("#addActivity").click(function () {
          var activityNameA = $("#activityNameA").val();
          var startTimeA = $("#startTimeA").val();
          var applyBeginTimeA = $("#applyBeginTimeA").val();
          var applyEndTimeA = $("#applyEndTimeA").val();
          if (activityNameA == '') {
            alert("活动名不能为空");
            return;
          }
          if (startTimeA == '') {
            alert("活动开始时间不能为空");
            return;
          }
          if (applyBeginTimeA == '') {
            alert("报名开始时间不能为空");
            return;
          }
          if (applyEndTimeA == '') {
            alert("报名结束时间不能为空");
            return;
          }
          var remarkA = $("#remarkA").val();
          $.post("/admin/addActivity",
                  {
                    activityName:activityNameA,
                    startTime: startTimeA,
                    applyBeginTime: applyBeginTimeA,
                    applyEndTime: applyEndTimeA,
                    remark: remarkA
                  }, function (data, status) {
                    if (data.c == '100'){
                      alert("活动创建成功");
                    }else{
                      alert(data.m);
                    }
                  });
        });
      </script>
    </div>

  </body>
</html>
