<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="layout :: htmlhead" th:with="title='管理'"></head>

<body>
<div th:replace="layout :: navbar-admin">(navbar)</div>

<div class="container-fluid">
    <div class="starter-template">
        <h1>预定管理</h1>
        <p>The current time is <span th:text="${currentTime}">(time)</span></p>
    </div>
    <div>
        <li><a th:href="@{'/meetingroom/book/newBook'}"/>新增预定</li>
    </div>

    <table class="table table-hover">
        <thead>
        <tr>
            <th>会议室名</th>
            <th>审核状态</th>
            <th>会议开始时间</th>
            <th>会议结束时间</th>
            <th>会议状态</th>
            <th>申请人</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="mrb : ${page.list}">
            <td th:id="'mbrRoomname'+${mrb.roomname}" th:text="${mrb.roomname}">...</td>
            <td th:id="'auditStatus'+${mrb.auditStatus}" th:text="${mrb.auditStatus}">...</td>
            <td th:text="${#dates.format(mrb.meetingBeginTime,'yyyy-MM-dd HH:mm:ss')}">...</td>
            <td th:text="${#dates.format(mrb.meetingEndTime,'yyyy-MM-dd HH:mm:ss')}">...</td>
            <td th:id="'status'+${mrb.status}" th:text="${mrb.status}">...</td>
            <td th:id="'realName'+${mrb.realName}" th:text="${mrb.realName}">...</td>
            <td>
                <button><a th:href="@{'/meetingroom/book/newBook?id='+${mrb.id}}"/>
                    编辑预定
                </button>
            </td>
            <td class="delete" th:id="'cancel'+${mrb.id}"
                class="btn btn-danger" type="button"
                onclick="cancelMeetingroomBook(this)">取消预定
            </td>
            <td class="audit" data-toggle="modal" data-target="#auditMeetingroomBookModal"
                class="btn btn-primary" type="button" th:id="'audit'+${mrb.id}"
                onclick="auditMeetingroomBook(this)">审核预定
            </td>
        </tr>
        </tbody>
    </table>
    <nav aria-label="...">
        <ul class="pager">
            <li class="previous"><a th:href="@{'/meetingroom/book/list?pageNum='+${page.prePage}}"><span
                    aria-hidden="true">&larr;</span> 上一页</a></li>
            <li class="next"><a th:href="@{'/meetingroom/book/list?pageNum='+${page.nextPage}}">下一页 <span
                    aria-hidden="true">&rarr;</span></a>
            </li>
        </ul>
    </nav>
</div>

<div th:include="layout :: footer" id="footer">(footer)</div>
<script th:inline="javascript">
    var mbrBasePath = 'meetingroom/book';

    th:onclick = "'javascript:goMRBList('+${mrb.id}+')'

    function updateMrBook(obj) {
        var id = $(obj).attr("id");
        id = id.substring(4);
        window.open(mbrBasePath + '/newBook?id=' + id);
    }


</script>
</body>
</html>
